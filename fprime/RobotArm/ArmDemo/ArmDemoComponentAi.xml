<?xml version="1.0" encoding="UTF-8"?>
<?oxygen RNGSchema="file:../xml/ISF_Component_Schema.rnc" type="compact"?>

<component name="ArmDemo" kind="active" namespace="RobotArm">
    <import_port_type>RobotArm/ServoPort/ServoPortAi.xml</import_port_type>
    <import_port_type>Svc/Sched/SchedPortAi.xml</import_port_type>
    <comment>Arm Demo App component</comment>
    <ports>
        <port name="position" data_type="RobotArm::ServoSet" kind="output" max_number="4">
            <comment>
            Servo position port
            </comment>
        </port>
        <port name="Run" data_type="Svc::Sched" kind="async_input" >
            <comment>
            Run port for starting packet send cycle
            </comment>
        </port>
    </ports>
    <commands>
        <!-- Claw Angle command -->
        <command kind="async" opcode="0x0" mnemonic="AA_CLAW_ANG" >
            <comment>
            Claw angle command
            </comment>
            <args>
                <arg name="angle" type="F32">
                    <comment>The commanded angle</comment>
                </arg>
             </args>
        </command>
        <!-- Base Angle command -->
        <command kind="async" opcode="0x1" mnemonic="AA_BASE_ANG" >
            <comment>
            Base angle command
            </comment>
            <args>
                <arg name="angle" type="F32">
                    <comment>The commanded angle</comment>
                </arg>
             </args>
        </command>
        <!-- Arm Height angle command -->
        <command kind="async" opcode="0x2" mnemonic="AA_ARM_HEIGHT_ANG" >
            <comment>
            Arm height angle command
            </comment>
            <args>
                <arg name="angle" type="F32">
                    <comment>The commanded angle</comment>
                </arg>
             </args>
        </command>
        <!-- Arm length angle command -->
        <command kind="async" opcode="0x3" mnemonic="AA_ARM_LENGTH_ANG" >
            <comment>
            Arm length angle command
            </comment>
            <args>
                <arg name="angle" type="F32">
                    <comment>The commanded angle</comment>
                </arg>
             </args>
        </command>
    </commands>
    <events>
	    <!-- Commanded claw angle event -->
	    <event id="0" name="AA_ClawAngleCmd" severity="ACTIVITY_HI" format_string = "Claw commanded to %f"  >
	        <comment>
	        Claw Angle commanded
	        </comment>
	        <args>
	            <arg name="angle" type="F32">
	                <comment>The commanded angle</comment>
	            </arg>
	        </args>
	    </event>
	    <!-- Commanded base angle event -->
	    <event id="1" name="AA_BaseAngleCmd" severity="ACTIVITY_HI" format_string = "Base commanded to %f"  >
	        <comment>
	        Base Angle commanded
	        </comment>
	        <args>
	            <arg name="angle" type="F32">
	                <comment>The commanded angle</comment>
	            </arg>
	        </args>
	    </event>
	    <!-- Commanded arm length angle event -->
	    <event id="2" name="AA_ArmLengthAngleCmd" severity="ACTIVITY_HI" format_string = "Arm length commanded to %f"  >
	        <comment>
	        Arm length commanded
	        </comment>
	        <args>
	            <arg name="angle" type="F32">
	                <comment>The commanded angle</comment>
	            </arg>
	        </args>
	    </event>
	    <!-- Commanded arm height event -->
	    <event id="3" name="AA_ArmHeightAngleCmd" severity="ACTIVITY_HI" format_string = "Arm height commanded to %f"  >
	        <comment>
	        Arm height angle commanded
	        </comment>
	        <args>
	            <arg name="angle" type="F32">
	                <comment>The commanded angle</comment>
	            </arg>
	        </args>
	    </event>
	</events>    
    <telemetry>
        <channel id="0" name="AA_ClawAngle" data_type="F32">
            <comment>
            Commanded angle
            </comment>
        </channel>
        <channel id="1" name="AA_BaseAngle" data_type="F32">
            <comment>
            Commanded angle
            </comment>
        </channel>
        <channel id="2" name="AA_ArmHeightAngle" data_type="F32">
            <comment>
            Commanded angle
            </comment>
        </channel>
        <channel id="3" name="AA_ArmLengthAngle" data_type="F32">
            <comment>
            Commanded angle
            </comment>
        </channel>
        <channel id="4" name="AA_Cycles" data_type="U32">
            <comment>
            Scheduler cycles
            </comment>
        </channel>
    </telemetry>
    
</component>

